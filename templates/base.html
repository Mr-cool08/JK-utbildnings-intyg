<!DOCTYPE html>
<html lang="sv">
<head>
    <link rel="shortcut icon" type="image/gif" href="{{ url_for('static', filename='pictures/favicon.gif') }}">
    <meta charset="UTF-8">
    <title>{% block title %}Min webbplats{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    {% block head %}{% endblock %}
</head>
<body>
    <nav>
        <a class="brand" href="/">Hem</a>
        <div class="nav-links">
            {% if session.get('supervisor_logged_in') %}
                <a href="{{ url_for('supervisor_dashboard') }}">Handledarpanel</a>
                <a href="/logout">Logga ut</a>
            {% elif session.get('user_logged_in') %}
                <a href="/dashboard">Intyg</a>
                <a href="/logout">Logga ut</a>
            {% elif session.get('admin_logged_in') %}
                <a href="/admin">Admin</a>
                <a href="/logout">Logga ut</a>
            {% else %}
                <a href="/login">Logga in</a>
                <a href="{{ url_for('supervisor_login') }}">Handledarinloggning</a>
            {% endif %}
        </div>
    </nav>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-container">
                {% for category, message in messages %}
                    <div class="flash {{ category }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
    <main>
        {% block content %}{% endblock %}
    </main>
    <footer class="site-footer">
        <div class="footer-links">
            <a href="{{ url_for('privacy_policy') }}">Integritetspolicy</a>
            <a href="{{ url_for('cookie_policy') }}">Cookiepolicy</a>
            <a href="{{ url_for('terms_of_use') }}">Användarvillkor</a>
            <a href="{{ url_for('license') }}">Licensavtal</a>
        </div>
        <p>{% block footer %}Liam Suorsa © 2025{% endblock %}</p>
    </footer>
    <div id="cookie-banner" class="cookie-banner" role="dialog" aria-live="polite" aria-label="Information om kakor">
        <div class="cookie-banner__content">
            <p>
                Vi använder nödvändiga kakor för att sidan ska fungera och sessionskakor för att hålla dig inloggad.
                Icke-nödvändiga kakor sätts endast om du ger ditt samtycke. Läs mer i vår
                <a href="{{ url_for('cookie_policy') }}">cookiepolicy</a> och vår
                <a href="{{ url_for('privacy_policy') }}">integritetspolicy</a>.
            </p>
            <button type="button" id="accept-cookies">Jag accepterar icke-nödvändiga kakor</button>
        </div>
    </div>
    <script>
        (function () {
            var banner = document.getElementById('cookie-banner');
            if (!banner) {
                return;
            }
            var consentGiven = document.cookie.split(';').some(function (entry) {
                return entry.trim().indexOf('cookie_consent=granted') === 0;
            });
            if (consentGiven) {
                banner.classList.add('is-hidden');
                return;
            }
            var button = document.getElementById('accept-cookies');
            if (!button) {
                return;
            }
            button.addEventListener('click', function () {
                var expires = new Date();
                expires.setFullYear(expires.getFullYear() + 1);
                document.cookie = 'cookie_consent=granted; path=/; expires=' + expires.toUTCString() + '; SameSite=Lax';
                banner.classList.add('is-hidden');
            });
        })();
    </script>
</body>
</html>
