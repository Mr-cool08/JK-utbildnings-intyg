version: '3.9'
services:
  app:
    build: .
    ports:
      # App lyssnar på 8080 i containern -> mappa värdens port 443 till 8080
      - "443:8080"
    env_file:
      - .env
    environment:
      DB_PATH: /data/database.db
      # Uncomment below to supply your own TLS certificates
      # TLS_CERT_PATH: /etc/nginx/certs/server.crt
      # TLS_KEY_PATH: /etc/nginx/certs/server.key
    volumes:
      - env_data:/config
      - uploads_data:/app/uploads
      - db_data:/data
      - logs_data:/app/logs
      - ./certs:/etc/nginx/certs:ro   # Optional TLS certs

volumes:
  env_data:
    name: env_data
  uploads_data:
    name: uploads_data
  db_data:
    name: db_data
  logs_data:
    name: logs_data
