# Copyright (c) Liam Suorsa and Mika Suorsa

services:
  cloudflare_failover_cron:
    build:
      context: .
      dockerfile: scripts/failover/Dockerfile
    env_file:
      - .env
    environment:
      FAILOVER_MAIN_URL: ${FAILOVER_MAIN_URL:-https://utbildningsintyg.se/health}
      FAILOVER_TRAEFIK_URL: ${FAILOVER_TRAEFIK_URL:-http://127.0.0.1:8080/ping}
      FAILOVER_PRIMARY_TARGET: ${FAILOVER_PRIMARY_TARGET:-utbildningsintyg.se}
      FAILOVER_FALLBACK_TARGET: ${FAILOVER_FALLBACK_TARGET:-jk-utbildnings-intyg.onrender.com}
      FAILOVER_HTTP_TIMEOUT_SECONDS: ${FAILOVER_HTTP_TIMEOUT_SECONDS:-8}
      CLOUDFLARE_API_TOKEN: ${CLOUDFLARE_API_TOKEN:-}
      CLOUDFLARE_ZONE_ID: ${CLOUDFLARE_ZONE_ID:-}
      CLOUDFLARE_RECORD_ID: ${CLOUDFLARE_RECORD_ID:-}
    restart: unless-stopped
    network_mode: host

# Copyright (c) Liam Suorsa and Mika Suorsa
