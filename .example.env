# Copyright (c) Liam Suorsa and Mika Suorsa
# Exempel på produktionsmiljö för JK Utbildningsintyg
# Kopiera till .env och byt ut alla placeholder-värden.

# SMTP-inställningar
smtp_port=587
smtp_server=smtp.example.se
smtp_user=byt.mig@example.se
smtp_password=BYT_MIG
smtp_from=byt.mig@example.se
smtp_timeout=10
ALERT_EMAIL_FROM=

# Visningsnamn i aviseringar och loggar
APP_NAME=utbildningsintyg.se

# Admin email för alla notifikationer (kritiska händelser, systemövervakning, fel)
# Stöder kommaseparerade adresser: admin1@example.com,admin2@example.com
ADMIN_EMAIL=admin@example.com
CRITICAL_ALERTS_EMAIL=admin@example.com

# Admin-inloggning
admin_username=admin
admin_password=BYT_MIG

# Hemlig nyckel som Flask använder för sessioner
secret_key=BYT_MIG
SECRET_KEY=BYT_MIG

# Hashningsinställningar
HASH_SALT=BYT_MIG
HASH_ITERATIONS=600000
HASH_ITERATIONS_TEST=1000

# Databas (extern eller containeriserad PostgreSQL)
POSTGRES_HOST=postgres
POSTGRES_DB=utbildningsintyg
POSTGRES_USER=jk_admin
POSTGRES_PASSWORD=BYT_MIG
POSTGRES_PORT=5432
POSTGRES_FALLBACK_HOSTS=localhost,127.0.0.1
DATABASE_URL=
DATABASE_INIT_MAX_ATTEMPTS=5
POSTGRES_BIND_IP=267.0.0.1 # 0.0.0.0 för publikt
# Backup-inställningar för postgres_backup
BACKUP_RETENTION_DAYS=7
BACKUP_INTERVAL_SECONDS=86400

# Ingen SQLite i produktion
LOCAL_TEST_DB_PATH=instance/test.db

# Cloudflare Origin Cert på origin-servern
ORIGIN_CERT_PATH=/etc/ssl/cloudflare/origin.crt
ORIGIN_KEY_PATH=/etc/ssl/cloudflare/origin.key

# Proxy-hopp (Traefik är enda betrodda proxyn mot Flask när Cloudflare används).
TRUSTED_PROXY_COUNT=1

# Flask-inställningar
# DEV_MODE styr Flask-debuggning samt aktiverar extra debug-loggning.
DEV_MODE=False
PORT=8080

# Avancerad inläsning av miljöfil (valfritt)
# Om CONFIG_PATH sätts läses den filen först.
CONFIG_PATH=

# Demo-läge (håll False i produktion)
ENABLE_DEMO_MODE=False
DEMO_USER_EMAIL=demo.anvandare@example.com
DEMO_USER_NAME=Demoanvändare
DEMO_USER_PERSONNUMMER=199001011234
DEMO_USER_PASSWORD=DemoLösenord1!
DEMO_SUPERVISOR_EMAIL=demo.foretagskonto@example.com
DEMO_SUPERVISOR_NAME=Demoföretagskonto
DEMO_SUPERVISOR_PASSWORD=DemoForetagskonto1!
DEMO_SUPERVISOR_ORGNR=5569668337
DEMO_SITE_URL=http://localhost:8080
DEMO_SECRET_KEY=BYT_MIG_DEMO_SECRET_KEY
DEMO_HASH_SALT=BYT_MIG_DEMO_HASH_SALT

# Loggning
LOG_LEVEL=INFO
LOG_DIR=logs
LOG_FILE=
LOG_MAX_BYTES=5242880
LOG_BACKUP_COUNT=5

# TLS-innehåll för lokal körning (valfritt, PEM som text)
TLS_CERT=
TLS_KEY=

# Antivirus/profilen "security"
ANTIVIRUS_SCAN_PATHS=/host
ANTIVIRUS_SCAN_SCHEDULE="0 */6 * * *"
ANTIVIRUS_QUARANTINE_PATH=
ANTIVIRUS_EXTRA_ARGS=
ANTIVIRUS_EXTRA_EXCLUDE_DIRS=
ALERT_SMTP_TLS=True
ALERT_EMAIL_SUBJECT="Varning: antivirus hittade infekterade filer"

# Servermonitor/profilen "security"
MONITOR_CHECK_INTERVAL_SECONDS=60
CLAMAV_SCAN_IMAGE=clamav/clamav:stable
CLAMAV_SCAN_TIMEOUT_SECONDS=21600

# Statussida
STATUS_LOG_LEVEL=INFO
STATUS_PORT=80
STATUS_ENVIRONMENT=Produktion
STATUS_DB_HOST=postgres
STATUS_DB_NAME=utbildningsintyg
STATUS_DB_USER=jk_admin
STATUS_DB_PASSWORD=BYT_MIG
STATUS_DB_PORT=5432
STATUS_PROXY_HOST=traefik
STATUS_PROXY_PORT=80
STATUS_TRAEFIK_HOST=traefik
STATUS_TRAEFIK_PORT=80
STATUS_NGINX_HOST=
STATUS_NGINX_PORT=
STATUS_EXTRA_HTTP_CHECKS=
STATUS_COUNTRY_AVAILABILITY=SE:https://utbildningsintyg.se/health,NO:https://utbildningsintyg.se/health,DK:https://utbildningsintyg.se/health,FI:https://utbildningsintyg.se/health


# Namnet på ett externt Docker-nätverk som ska återanvändas av proxyn.
# Lämna värdet tomt för att låta docker compose skapa ett nytt nätverk.
PUBLIC_NETWORK_NAME=

# Additional optional / discovered configuration keys
# Timezone (used by app and status service)
APP_TIMEZONE=Europe/Stockholm

# TLS/domains for cert management
TLS_DOMAINS=utbildningsintyg.se,www.utbildningsintyg.se,demo.utbildningsintyg.se

# Reverse proxy upstreams (used by deployment scripts)
APP_UPSTREAM=app:80
APP_DEMO_UPSTREAM=app_demo:80

# OpenTelemetry (optional)
OTEL_ENABLED=False
OTEL_SERVICE_NAME=jk-utbildnings-intyg
OTEL_EXPORTER_OTLP_ENDPOINT=
OTEL_EXPORTER_OTLP_HEADERS=

# Public domain names
DOMAIN_MAIN=utbildningsintyg.se
DOMAIN_WWW=www.utbildningsintyg.se
DOMAIN_DEMO=demo.utbildningsintyg.se

# URL scheme and cookie settings for proxies
PREFERRED_URL_SCHEME=https
SESSION_COOKIE_SECURE=true

# Postgres tuning (optional)
POSTGRES_POOL_RECYCLE_SECONDS=1800



# Update-script (valfritt)
# Sätt true om update_app.py även ska köra apt-get update/upgrade i non-interactive läge
ENABLE_OS_UPGRADE=false
CHECK_OS_UPDATES=
